@page "/patient/appointment/create"
@model FindingHealthcareSystem.Pages.Patient.Appointment.CreateModel
@{
}
<link rel="stylesheet" href="~/css/createAppointment.css" />
@{
    var providerId = Request.Query["providerId"];
    var providerType = Request.Query["providerType"];
}
<div class="container mt-10">
    <div class="booking-header">
        <h1 class="booking-title">Đặt lịch khám</h1>
        <p class="booking-subtitle">Chọn ngày và giờ phù hợp với lịch trình của bạn</p>
    </div>

    <div class="card mb-4">
        <div class="card-body p-0">
            <div class="wrapper">
                <header>
                    <p class="current-date">Tháng 3 2025</p>
                    <div class="icons">
                        <span id="prev" class="material-symbols-rounded">chevron_left</span>
                        <span id="next" class="material-symbols-rounded">chevron_right</span>
                    </div>
                </header>
                <div class="calendar">
                    <ul class="weeks">
                        <li>CN</li>
                        <li>T2</li>
                        <li>T3</li>
                        <li>T4</li>
                        <li>T5</li>
                        <li>T6</li>
                        <li>T7</li>
                    </ul>
                    <ul class="days">
                        <!-- Days will be added by JavaScript -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-7 mb-4">
            <!-- Time Slots Column -->
            <div class="time-slots-container mb-3">
                <h2 class="section-title">Chọn giờ khám</h2>
                <div class="row">
                    @foreach (var slot in Model.TimeSlots)
                    {
                        <div class="col-lg-4 col-6 mb-3">
                            <div class="time-slot">
                                <div class="time-slot-text">@slot</div>
                                <span class="badge-available">Còn trống</span>
                            </div>
                        </div>
                    }
                </div>
            </div>


            <!-- Service Column -->
            <div class="service-card">
                <h2 class="section-title">Chọn dịch vụ</h2>

                <div class="service-options">
                    @foreach (var service in Model.services)
                    {
                        <div class="service-item">
                            <div class="custom-control custom-radio">
                                <input type="radio" id="service@service.Name" name="serviceOption" class="custom-control-input" />
                                <label class="custom-control-label" for="service@service.Name">
                                    <div class="service-info">
                                        <div class="service-name">@service.Name</div>
                                        <div class="service-description">@service.Description</div>
                                    </div>
                                    <div class="service-price">@service.Price?.ToString("C0")</div>
                                </label>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>


        <!-- Appointment Summary Column -->
        <div class="col-5">
            <div class="appointment-summary">
                <h2 class="section-title">Thông tin lịch khám</h2>

                <div class="doctor-info">
                    @if(providerType == "Facility")
                    {
                        <img src="~/img/DefaultFacility.jpg" alt="Doctor" class="doctor-avatar">

                    }
                    else if (providerType == "Professional")
                    {
                        <img src="~/img/DefaultProfessional.jpg" alt="Doctor" class="doctor-avatar">

                    }

                    <div class="doctor-details">
                        <div class="doctor-name">
                            @(providerType == "Facility" ? Model.facility.Name : Model.professional.FullName)
                        </div>
                    </div>
                </div>

                <div class="summary-item">
                    <div class="summary-label">Dịch vụ</div>
                    <div class="summary-value">Khám tổng quát</div>
                </div>

                <div class="summary-item">
                    <div class="summary-label">Ngày khám</div>
                    <div class="summary-value">Thứ tư, 19/03/2025</div>
                </div>

                <div class="summary-item">
                    <div class="summary-label">Địa chỉ</div>
                    @if (providerType == "Facility")
                    {
                        <div class="summary-value">@Model.facility.Address, @Model.facility.Ward, @Model.facility.District, @Model.facility.Province</div>

                    }
                    else if (providerType == "Professional")
                    {
                        <div class="summary-value">@Model.professional.Address, @Model.professional.Ward, @Model.professional.District, @Model.professional.Province</div>

                    }
                </div>

                <div class="appointment-footer">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <div class="summary-label">Tổng tiền</div>
                            <div class="price">500.000 VNĐ</div>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button class="btn btn-primary">Xác nhận đặt lịch</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

